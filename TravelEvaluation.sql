CREATE DATABASE TRAVEL;

USE TRAVEL;

CREATE TABLE LOGIN(
LOGINID INT PRIMARY KEY IDENTITY(1,1),
USERNAME VARCHAR(50) NOT NULL,
PASSWORD VARCHAR(50) NOT NULL,
USERTYPE VARCHAR(50) NOT NULL);

select * from login;

INSERT INTO LOGIN VALUES
('ADMIN1','ADMIN1','ADMIN'),
('ADMIN2','ADMIN2','ADMIN'),
('HR1','HR1','HR'),
('HR2','HR2','HR'),
('USER1','USER1','USER'),
('USER2','USER2','USER');

CREATE TABLE EMPLOYEE(
EMP_ID INT PRIMARY KEY NOT NULL IDENTITY(1,1),
FNAME VARCHAR(20) NOT NULL,
LNAME VARCHAR(20) NOT NULL,
AGE INT NOT NULL,
GENDER VARCHAR(15),
ADDRESS VARCHAR(50),
PHONE INT,
LOGINID INT NOT NULL,
CONSTRAINT EMPLOG FOREIGN KEY
(LOGINID) REFERENCES 
LOGIN(LOGINID));

INSERT INTO EMPLOYEE VALUES
('FNAME1','LNAME1',25,'MALE','ADDR1',123456789,1),
('FNAME2','LNAME2',25,'MALE','ADDR2',123456789,2),
('FNAME3','LNAME3',25,'MALE','ADDR3',123456789,3),
('FNAME4','LNAME4',25,'MALE','ADDR4',123456789,4),
('FNAME5','LNAME5',25,'MALE','ADDR5',123456789,5),
('FNAME6','LNAME6',25,'MALE','ADDR6',123456789,6);


CREATE TABLE PROJECT(
PROJECT_ID INT PRIMARY KEY IDENTITY(1,1),
PROJECT_NAME VARCHAR(100));

INSERT INTO PROJECT VALUES
('MANALI'),('PARIS'),('NORWAY'),('ISTANBUL');




CREATE TABLE REQUEST(
REQUESTID INT PRIMARY KEY IDENTITY(1,1),
TRAVEL_CAUSE VARCHAR(100),
SOURCE VARCHAR(100) NOT NULL,
DESTINATION VARCHAR(100) NOT NULL,
MODE VARCHAR(100),
FROM_DATE DATE NOT NULL,
TO_DATE DATE NOT NULL,
NO_DAYS INT,
PRIORITY VARCHAR(20),
PROJECT_ID INT,
EMP_ID INT,
STATUS VARCHAR(20));

INSERT INTO REQUEST VALUES
('PLEASURE', 'COK', 'CDG', 'FLIGHT','2021-01-01', '2021-02-01',31, 'NORMAL',1,5,'PENDING'),
('PLEASURE', 'COK', 'CDG', 'FLIGHT','2021-01-01', '2021-02-01',31, 'NORMAL',2,6,'PENDING');

select * from REQUEST;

select r.REQUESTID, r.TRAVEL_CAUSE, r.SOURCE, r.DESTINATION, r.MODE, r.FROM_DATE, r.TO_DATE, r.NO_DAYS, r.PRIORITY, p.PROJECT_NAME, e.FNAME, r.STATUS 
from REQUEST as r, PROJECT as p, EMPLOYEE as e
where
r.EMP_ID = e.EMP_ID and
r.PROJECT_ID = p.PROJECT_ID;


